<!DOCTYPE html>
<html>
<head>
    <title>Control</title>
    <!--Script references. -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <!--[if IE]><script type="text/javascript" src="excanvas.js"></script><![endif]-->

    <!--Reference the SignalR library. -->
    <script src="/Scripts/jquery.signalR-2.0.0.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/signalr/hubs"></script>
    <!--Add script to update the page and send messages.-->
    <script src="Scripts/jquery.knob.js"></script>

    <script>
        $(function ($) {

            // Declare a proxy to reference the hub.
            var chat = $.connection.chatHub;
            // Create a function that the hub can call to broadcast messages.
            chat.client.broadcastChange = function (value) {
                $('.knob').val(value).trigger("change");
            };
            chat.client.broadcastRelease = function (value) {
                $('.knob').val(value).trigger("release");
            };

            // Start the connection.
            $.connection.hub.start().done(function () {
                $(".knob").knob({
                    change: function (value) {
                        //console.log("change : " + value);
                        chat.server.change(value);
                    },
                    release: function (value) {                         
                        //console.log("release : " + value);
                        chat.server.release(value);
                    },
                    cancel: function () {
                        //console.log("cancel : ", this);
                    },
                    /*format : function (value) {
                        return value + '%';
                    },*/
                });                  
            });

            $('.knob').data('targetValue', 55);
            //basic setup
            $('.knob').animate({value: 100}, {
                duration: 1000,
                easing: 'swing',
                progress: function() {
                    $(this).val(Math.round(this.value / 100 * $(this).data('targetValue'))).trigger('change');
                }
            });
        });
    </script>
    <style>
        body {
            padding: 0;
            margin: 0 50px;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-weight: 300;
            -ms-text-rendering: optimizelegibility;
            text-rendering: optimizelegibility;
        }

        p {
            font-size: 30px;
            line-height: 30px;
        }

        div.demo {
            text-align: center;
            width: 280px;
            float: left;
        }

            div.demo > p {
                font-size: 20px;
            }
    </style>
</head>
<body>

    <!--<div class="demo">
        <p>&#215; Disable display input</p>
        <pre>
            data-width="100"
            data-displayInput=false
            </pre>
        <input class="knob" data-width="100" data-displayinput=false value="35">
    </div>
    <div class="demo">
        <p>&#215; 'cursor' mode</p>
        <pre>
            data-width="150"
            data-cursor=true
            data-thickness=.3
            data-fgColor="#222222"
            </pre>
        <input class="knob" data-width="150" data-cursor=true data-fgcolor="#222222" data-thickness=.3 value="29">
    </div>-->
    <div class="demo">
        <input class="knob" data-width="200" data-min="0" data-max="100" data-displayprevious=true value="44">
    </div>
    <div style="clear:both"></div>



</body>
</html>
